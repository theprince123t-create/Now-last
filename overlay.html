<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Cric Overlay</title>
  <style>
    html,body{margin:0;padding:0;background:transparent;}
    .bar{
      position:fixed;left:0;right:0;bottom:0;
      display:flex;justify-content:space-between;align-items:center;
      padding:12px 18px; box-sizing:border-box;
      background:#28306a; color:#fff; font-family:Arial,Helvetica,sans-serif;
      font-size:20px; letter-spacing:.3px;
    }
    .pill{background:#4050a5; padding:6px 10px; border-radius:12px; margin-left:10px; font-size:16px}
    .side{min-width:32%; display:flex; gap:14px; align-items:center}
    .center{text-align:center; flex:1}
    .small{font-size:16px; opacity:.9}
    @media (max-width:800px){ .bar{font-size:16px} .pill{font-size:14px} .small{font-size:14px} }
  </style>
</head>
<body>
  <div class="bar">
    <div class="side" id="left">–</div>
    <div class="center" id="mid">–</div>
    <div class="side" id="right" style="justify-content:flex-end">–</div>
  </div>

  <script>
    function getQuery(k){return new URL(location.href).searchParams.get(k)}

    async function load() {
      try {
        const apiURL = "/score" + (getQuery("url") ? ("?url=" + encodeURIComponent(getQuery("url"))) : "");
        const res = await fetch(apiURL, { cache: "no-store" });
        const d = await res.json();

        const left = document.getElementById("left");
        left.innerHTML =
          `<div>${d.striker || "-"} <span class="small">${d.strikerRuns ?? "-"}(${d.strikerBalls ?? "-"})</span></div>
           <div>${d.nonStriker || "-"} <span class="small">${d.nonStrikerRuns ?? "-"}(${d.nonStrikerBalls ?? "-"})</span></div>`;

        const mid = document.getElementById("mid");
        mid.innerHTML =
          `<strong>${d.team || ""}</strong>
           <span class="pill">${d.score || ""} ${d.overs ? "(" + d.overs + ")" : ""}</span>
           <span class="small">RR: ${d.rr || "-"}</span>
           <span class="small">CRR: ${d.crr || "-"}</span>`;

        const right = document.getElementById("right");
        right.innerHTML =
          `Bowler: <strong>${d.bowler || "-"}</strong>
           <span class="small">${(d.bowlerWkts ?? "-")}/${(d.bowlerRuns ?? "-")} ${d.bowlerOvers ? "(" + d.bowlerOvers + ")" : ""}</span>`;
      } catch(e){
        console.error(e);
      }
    }

    load();
    // 5 sec me auto-refresh
    setInterval(load, 5000);
  </script>
</body>
</html>
